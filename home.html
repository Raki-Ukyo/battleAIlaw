<div class="stat-item">
                    <h4>å­¦ç¿’ãƒ¬ãƒ™ãƒ«</h4>
                    <div id="learningLevel">åˆå¿ƒè€…</div>
                </div><!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIæ³•ãƒãƒˆãƒ«ã‚²ãƒ¼ãƒ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .title {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .character-select {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .character-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .character-card:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.2);
            border-color: #ffd700;
        }

        .character-card.selected {
            border-color: #ffd700;
            background: rgba(255,215,0,0.2);
        }

        .character-icon {
            font-size: 4em;
            margin-bottom: 10px;
        }

        .battle-screen {
            display: none;
        }

        .battle-field {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 30px;
        }

        .fighter {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .fighter-icon {
            font-size: 5em;
            margin-bottom: 10px;
        }

        .hp-bar {
            width: 100%;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .hp-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4757, #ffa502, #2ed573);
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .quiz-section {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .quiz-question {
            font-size: 1.2em;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .quiz-options {
            display: grid;
            gap: 10px;
            margin-bottom: 20px;
        }

        .quiz-option {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
        }

        .quiz-option:hover {
            background: rgba(255,255,255,0.2);
            border-color: #ffd700;
        }

        .quiz-option.selected {
            background: rgba(255,215,0,0.3);
            border-color: #ffd700;
        }

        .quiz-option.correct {
            background: rgba(46,213,115,0.3);
            border-color: #2ed573;
        }

        .quiz-option.incorrect {
            background: rgba(255,71,87,0.3);
            border-color: #ff4757;
        }

        .action-button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            color: white;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .action-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .battle-log {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            height: 150px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9em;
        }

        .damage-animation {
            position: absolute;
            font-size: 2em;
            font-weight: bold;
            animation: damageFloat 1s ease-out forwards;
            pointer-events: none;
        }

        @keyframes damageFloat {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-50px); }
        }

        .technique-name {
            font-size: 1.5em;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }

        .explanation {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .game-over {
            display: none;
            text-align: center;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 30px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .battle-field {
                grid-template-columns: 1fr;
                gap: 20px;
            },
            // ç¬¬ä¸‰ç«  äººå·¥çŸ¥èƒ½åŸºæœ¬è¨ˆç”»ï¼ˆç¬¬18æ¡ï¼‰
            {
                article: 'ç¬¬18æ¡ï¼ˆäººå·¥çŸ¥èƒ½åŸºæœ¬è¨ˆç”»ï¼‰',
                technique: 'ğŸ“‹ åŸºæœ¬è¨ˆç”»ç­–å®š',
                question: 'äººå·¥çŸ¥èƒ½åŸºæœ¬è¨ˆç”»ã®ç­–å®šãƒ—ãƒ­ã‚»ã‚¹ã§æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'å„çœåºãŒå€‹åˆ¥ã«ç­–å®š',
                    'äººå·¥çŸ¥èƒ½æˆ¦ç•¥æœ¬éƒ¨ãŒæ¡ˆã‚’ä½œæˆã—å†…é–£ç·ç†å¤§è‡£ãŒé–£è­°æ±ºå®šã‚’æ±‚ã‚ã‚‹',
                    'æ°‘é–“ä¼æ¥­ãŒä¸»å°ã—ã¦ç­–å®š',
                    'å›½ä¼šãŒç›´æ¥ç­–å®š'
                ],
                correct: 1,
                explanation: 'ç¬¬18æ¡ã§ã¯ã€Œäººå·¥çŸ¥èƒ½æˆ¦ç•¥æœ¬éƒ¨ãŒæ¡ˆã‚’ä½œæˆã—ã€å†…é–£ç·ç†å¤§è‡£ãŒé–£è­°ã®æ±ºå®šã‚’æ±‚ã‚ã€æ±ºå®šå¾Œé…æ»ãªãå…¬è¡¨ã™ã‚‹ã€ãƒ—ãƒ­ã‚»ã‚¹ãŒè¦å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 3
            },
            {
                article: 'ç¬¬18æ¡ç¬¬2é …ï¼ˆè¨ˆç”»å†…å®¹ï¼‰',
                technique: 'ğŸ¯ æˆ¦ç•¥è¨ˆç”»ç«‹æ¡ˆ',
                question: 'äººå·¥çŸ¥èƒ½åŸºæœ¬è¨ˆç”»ã«å«ã¾ã‚Œã‚‹äº‹é …ã¨ã—ã¦é©åˆ‡ã§ãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'æ–½ç­–ã«ã¤ã„ã¦ã®åŸºæœ¬çš„ãªæ–¹é‡',
                    'æ”¿åºœãŒç·åˆçš„ã‹ã¤è¨ˆç”»çš„ã«è¬›ãšã¹ãæ–½ç­–',
                    'å€‹åˆ¥ä¼æ¥­ã®è©³ç´°ãªäº‹æ¥­è¨ˆç”»',
                    'ç·åˆçš„è¨ˆç”»çš„æ¨é€²ã«å¿…è¦ãªäº‹é …'
                ],
                correct: 2,
                explanation: 'åŸºæœ¬è¨ˆç”»ã«ã¯ã€ŒåŸºæœ¬æ–¹é‡ã€æ”¿åºœæ–½ç­–ã€ç·åˆçš„æ¨é€²ã«å¿…è¦ãªäº‹é …ã€ãŒå«ã¾ã‚Œã¾ã™ãŒã€å€‹åˆ¥ä¼æ¥­ã®äº‹æ¥­è¨ˆç”»ã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚',
                chapter: 3
            },
            // ç¬¬å››ç«  äººå·¥çŸ¥èƒ½æˆ¦ç•¥æœ¬éƒ¨ï¼ˆç¬¬19-28æ¡ï¼‰
            {
                article: 'ç¬¬19æ¡ï¼ˆè¨­ç½®ï¼‰',
                technique: 'ğŸ›ï¸ æˆ¦ç•¥æœ¬éƒ¨è¨­ç½®',
                question: 'äººå·¥çŸ¥èƒ½æˆ¦ç•¥æœ¬éƒ¨ã¯ã©ã“ã«è¨­ç½®ã•ã‚Œã¾ã™ã‹ï¼Ÿ',
                options: [
                    'æ–‡éƒ¨ç§‘å­¦çœ',
                    'çµŒæ¸ˆç”£æ¥­çœ',
                    'å†…é–£',
                    'ç·å‹™çœ'
                ],
                correct: 2,
                explanation: 'ç¬¬19æ¡ã§ã¯ã€ŒAIæŠ€è¡“ã®ç ”ç©¶é–‹ç™ºåŠã³æ´»ç”¨æ¨é€²æ–½ç­–ã‚’ç·åˆçš„ã‹ã¤è¨ˆç”»çš„ã«æ¨é€²ã™ã‚‹ãŸã‚ã€å†…é–£ã«äººå·¥çŸ¥èƒ½æˆ¦ç•¥æœ¬éƒ¨ã‚’ç½®ãã€ã¨è¦å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 4
            },
            {
                article: 'ç¬¬20æ¡ï¼ˆæ‰€æŒäº‹å‹™ï¼‰',
                technique: 'âš™ï¸ çµ„ç¹”é‹å–¶ç®¡ç†',
                question: 'äººå·¥çŸ¥èƒ½æˆ¦ç•¥æœ¬éƒ¨ã®æ‰€æŒäº‹å‹™ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'åŸºæœ¬è¨ˆç”»ã®æ¡ˆä½œæˆãƒ»å®Ÿæ–½æ¨é€²ã®ã¿',
                    'é‡è¦æ–½ç­–ã®ä¼ç”»ç«‹æ¡ˆãƒ»ç·åˆèª¿æ•´ã®ã¿',
                    'åŸºæœ¬è¨ˆç”»ã®æ¡ˆä½œæˆãƒ»å®Ÿæ–½æ¨é€²ã¨é‡è¦æ–½ç­–ã®ä¼ç”»ç«‹æ¡ˆãƒ»ç·åˆèª¿æ•´',
                    'äºˆç®—ã®åŸ·è¡Œã®ã¿'
                ],
                correct: 2,
                explanation: 'ç¬¬20æ¡ã§ã¯ã€ŒåŸºæœ¬è¨ˆç”»ã®æ¡ˆä½œæˆãƒ»å®Ÿæ–½æ¨é€²ã€ã¨ã€Œé‡è¦æ–½ç­–ã®ä¼ç”»ç«‹æ¡ˆãƒ»ç·åˆèª¿æ•´ã€ã®ä¸¡æ–¹ãŒæ‰€æŒäº‹å‹™ã¨ã—ã¦è¦å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 4
            },
            {
                article: 'ç¬¬22æ¡ï¼ˆæœ¬éƒ¨é•·ï¼‰',
                technique: 'ğŸ‘‘ æœ€é«˜è²¬ä»»è€…',
                question: 'äººå·¥çŸ¥èƒ½æˆ¦ç•¥æœ¬éƒ¨é•·ã¯èª°ãŒå‹™ã‚ã¾ã™ã‹ï¼Ÿ',
                options: [
                    'AIæˆ¦ç•¥æ‹…å½“å¤§è‡£',
                    'å†…é–£å®˜æˆ¿é•·å®˜',
                    'å†…é–£ç·ç†å¤§è‡£',
                    'æ–‡éƒ¨ç§‘å­¦å¤§è‡£'
                ],
                correct: 2,
                explanation: 'ç¬¬22æ¡ã§ã¯ã€Œæœ¬éƒ¨ã®é•·ã¯äººå·¥çŸ¥èƒ½æˆ¦ç•¥æœ¬éƒ¨é•·ã¨ã—ã€å†…é–£ç·ç†å¤§è‡£ã‚’ã‚‚ã£ã¦å……ã¦ã‚‹ã€ã¨è¦å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 4
            },
            {
                article: 'ç¬¬23æ¡ï¼ˆå‰¯æœ¬éƒ¨é•·ï¼‰',
                technique: 'ğŸ¤ å‰¯è²¬ä»»è€…ä½“åˆ¶',
                question: 'äººå·¥çŸ¥èƒ½æˆ¦ç•¥å‰¯æœ¬éƒ¨é•·ã¨ã—ã¦æ­£ã—ã„çµ„ã¿åˆã‚ã›ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'å†…é–£å®˜æˆ¿é•·å®˜ã®ã¿',
                    'AIæˆ¦ç•¥æ‹…å½“å¤§è‡£ã®ã¿',
                    'å†…é–£å®˜æˆ¿é•·å®˜ã¨AIæˆ¦ç•¥æ‹…å½“å¤§è‡£',
                    'å…¨ã¦ã®å›½å‹™å¤§è‡£'
                ],
                correct: 2,
                explanation: 'ç¬¬23æ¡ã§ã¯ã€Œå†…é–£å®˜æˆ¿é•·å®˜åŠã³äººå·¥çŸ¥èƒ½æˆ¦ç•¥æ‹…å½“å¤§è‡£ã€ã‚’å‰¯æœ¬éƒ¨é•·ã¨ã™ã‚‹ã¨è¦å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 4
            },
            {
                article: 'ç¬¬24æ¡ï¼ˆæœ¬éƒ¨å“¡ï¼‰',
                technique: 'ğŸ‘¥ å…¨çœåºé€£æº',
                question: 'äººå·¥çŸ¥èƒ½æˆ¦ç•¥æœ¬éƒ¨å“¡ã®æ§‹æˆã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'æœ¬éƒ¨é•·ã¨å‰¯æœ¬éƒ¨é•·ã®ã¿',
                    'é–¢ä¿‚çœåºã®å¤§è‡£ã®ã¿',
                    'æœ¬éƒ¨é•·åŠã³å‰¯æœ¬éƒ¨é•·ä»¥å¤–ã®å…¨ã¦ã®å›½å‹™å¤§è‡£',
                    'æ°‘é–“æœ‰è­˜è€…ã®ã¿'
                ],
                correct: 2,
                explanation: 'ç¬¬24æ¡ã§ã¯ã€Œæœ¬éƒ¨å“¡ã¯ã€æœ¬éƒ¨é•·åŠã³å‰¯æœ¬éƒ¨é•·ä»¥å¤–ã®å…¨ã¦ã®å›½å‹™å¤§è‡£ã‚’ã‚‚ã£ã¦å……ã¦ã‚‹ã€ã¨è¦å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 4
            },
            {
                article: 'ç¬¬25æ¡ï¼ˆè³‡æ–™æå‡ºå”åŠ›ï¼‰',
                technique: 'ğŸ“Š æƒ…å ±åé›†ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯',
                question: 'æˆ¦ç•¥æœ¬éƒ¨ãŒå”åŠ›ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹æ©Ÿé–¢ã«å«ã¾ã‚Œãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'é–¢ä¿‚è¡Œæ”¿æ©Ÿé–¢',
                    'åœ°æ–¹å…¬å…±å›£ä½“',
                    'ç‹¬ç«‹è¡Œæ”¿æ³•äºº',
                    'å¤–å›½æ”¿åºœæ©Ÿé–¢'
                ],
                correct: 3,
                explanation: 'ç¬¬25æ¡ã§ã¯ã€Œé–¢ä¿‚è¡Œæ”¿æ©Ÿé–¢ã€åœ°æ–¹å…¬å…±å›£ä½“ã€ç‹¬ç«‹è¡Œæ”¿æ³•äººã€åœ°æ–¹ç‹¬ç«‹è¡Œæ”¿æ³•äººã€ç‰¹æ®Šæ³•äººã€ã¸ã®å”åŠ›è¦è«‹ãŒè¦å®šã•ã‚Œã¦ã„ã¾ã™ãŒã€å¤–å›½æ”¿åºœæ©Ÿé–¢ã¯å«ã¾ã‚Œã¾ã›ã‚“ã€‚',
                chapter: 4
            }
            
            .title {
                font-size: 1.8em;
            }
            
            .character-select {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1 class="title">âš¡ AIæ³•ãƒãƒˆãƒ«ã‚²ãƒ¼ãƒ  âš¡</h1>
        
        <!-- ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é¸æŠç”»é¢ -->
        <div class="character-select-screen">
            <h2 style="text-align: center; margin-bottom: 20px;">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„</h2>
            <div class="character-select">
                <div class="character-card" data-character="developer">
                    <div class="character-icon">ğŸ‘¨â€ğŸ’»</div>
                    <h3>AIé–‹ç™ºè€…</h3>
                    <p>ç ”ç©¶é–‹ç™ºã®ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆ<br>æ”»æ’ƒåŠ›é‡è¦–ã‚¿ã‚¤ãƒ—</p>
                    <small>å¾—æ„æŠ€: åŸºç¤ç ”ç©¶ã€æŠ€è¡“é©æ–°</small>
                </div>
                <div class="character-card" data-character="regulator">
                    <div class="character-icon">ğŸ‘©â€âš–ï¸</div>
                    <h3>è¦åˆ¶å½“å±€è€…</h3>
                    <p>é©æ­£æ€§ç¢ºä¿ã®ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ<br>é˜²å¾¡åŠ›é‡è¦–ã‚¿ã‚¤ãƒ—</p>
                    <small>å¾—æ„æŠ€: é©æ­£æ€§ç¢ºä¿ã€å›½éš›å”åŠ›</small>
                </div>
                <div class="character-card" data-character="business">
                    <div class="character-icon">ğŸ‘”</div>
                    <h3>æ´»ç”¨äº‹æ¥­è€…</h3>
                    <p>å®Ÿç”¨åŒ–ã®ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«<br>ãƒãƒ©ãƒ³ã‚¹é‡è¦–ã‚¿ã‚¤ãƒ—</p>
                    <small>å¾—æ„æŠ€: äº‹æ¥­æ´»ç”¨ã€åŠ¹ç‡åŒ–</small>
                </div>
                <div class="character-card" data-character="citizen">
                    <div class="character-icon">ğŸ‘¥</div>
                    <h3>å›½æ°‘</h3>
                    <p>ç†è§£ã¨å”åŠ›ã®ã‚µãƒãƒ¼ã‚¿ãƒ¼<br>å›å¾©åŠ›é‡è¦–ã‚¿ã‚¤ãƒ—</p>
                    <small>å¾—æ„æŠ€: ç†è§£ä¿ƒé€²ã€å”åŠ›ä½“åˆ¶</small>
                </div>
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="action-button" onclick="startBattle()" id="startButton" disabled>ãƒãƒˆãƒ«é–‹å§‹ï¼</button>
            </div>
        </div>

        <!-- ãƒãƒˆãƒ«ç”»é¢ -->
        <div class="battle-screen">
            <div class="battle-field">
                <div class="fighter" id="player">
                    <div class="fighter-icon" id="playerIcon">ğŸ‘¨â€ğŸ’»</div>
                    <h3 id="playerName">ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼</h3>
                    <div class="hp-bar">
                        <div class="hp-fill" id="playerHP" style="width: 100%"></div>
                    </div>
                    <div id="playerHPText">HP: 100/100</div>
                </div>
                <div class="fighter" id="enemy">
                    <div class="fighter-icon" id="enemyIcon">ğŸ¤–</div>
                    <h3 id="enemyName">AIæ³•ãƒã‚¹ã‚¿ãƒ¼</h3>
                    <div class="hp-bar">
                        <div class="hp-fill" id="enemyHP" style="width: 100%"></div>
                    </div>
                    <div id="enemyHPText">HP: 100/100</div>
                </div>
            </div>

            <div class="quiz-section" id="quizSection">
                <div class="technique-name" id="techniqueName"></div>
                <div class="quiz-question" id="quizQuestion"></div>
                <div class="quiz-options" id="quizOptions"></div>
                <button class="action-button" onclick="submitAnswer()" id="submitButton" disabled>å›ç­”ã™ã‚‹</button>
                <div class="explanation" id="explanation" style="display: none;"></div>
            </div>

            <div class="battle-log" id="battleLog"></div>
            
            <div style="text-align: center;">
                <button class="action-button" onclick="nextTurn()" id="nextButton" style="display: none;">æ¬¡ã®ã‚¿ãƒ¼ãƒ³</button>
                <button class="action-button" onclick="resetGame()">ã‚²ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
        </div>

        <!-- ã‚²ãƒ¼ãƒ çµ‚äº†ç”»é¢ -->
        <div class="game-over" id="gameOver">
            <h2 id="gameResult"></h2>
            <div class="stats">
                <div class="stat-item">
                    <h4>æ­£è§£ç‡</h4>
                    <div id="accuracyRate">0%</div>
                </div>
                <div class="stat-item">
                    <h4>ç·ãƒ€ãƒ¡ãƒ¼ã‚¸</h4>
                    <div id="totalDamage">0</div>
                </div>
                <div class="stat-item">
                    <h4>ã‚¿ãƒ¼ãƒ³æ•°</h4>
                    <div id="turnCount">0</div>
                </div>
                <div class="stat-item">
                    <h4>ä½¿ç”¨ã—ãŸç« </h4>
                    <div id="chaptersUsed">-</div>
                </div>
            </div>
            <button class="action-button" onclick="resetGame()" style="margin-top: 20px;">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
        </div>
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹
        let gameState = {
            playerCharacter: null,
            playerHP: 100,
            enemyHP: 100,
            currentTurn: 'player',
            selectedAnswer: null,
            currentQuiz: null,
            turnNumber: 0,
            correctAnswers: 0,
            totalAnswers: 0,
            totalDamage: 0,
            availableChapters: [1, 2, 3, 4], // å…¨ç« åˆ©ç”¨å¯èƒ½
            playerUsedTechniques: [], // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒä½¿ã£ãŸæŠ€
            enemyUsedTechniques: []   // æ•µãŒä½¿ã£ãŸæŠ€
        };

        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å®šç¾©
        const characters = {
            developer: { name: 'AIé–‹ç™ºè€…', icon: 'ğŸ‘¨â€ğŸ’»', specialty: 'ç ”ç©¶é–‹ç™º' },
            regulator: { name: 'è¦åˆ¶å½“å±€è€…', icon: 'ğŸ‘©â€âš–ï¸', specialty: 'é©æ­£æ€§ç¢ºä¿' },
            business: { name: 'æ´»ç”¨äº‹æ¥­è€…', icon: 'ğŸ‘”', specialty: 'äº‹æ¥­æ´»ç”¨' },
            citizen: { name: 'å›½æ°‘', icon: 'ğŸ‘¥', specialty: 'ç†è§£ä¿ƒé€²' }
        };

        // AIæ³•ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ï¼ˆç¬¬1-17æ¡ï¼‰
        const quizData = [
            {
                article: 'ç¬¬1æ¡ï¼ˆç›®çš„ï¼‰',
                technique: 'ğŸ’« å›½æ°‘ç”Ÿæ´»å‘ä¸Šã®ç†å¿µ',
                question: 'AIæ³•ã®æœ€çµ‚çš„ãªç›®çš„ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'AIæŠ€è¡“ã®è¦åˆ¶å¼·åŒ–',
                    'å›½æ°‘ç”Ÿæ´»ã®å‘ä¸ŠåŠã³å›½æ°‘çµŒæ¸ˆã®å¥å…¨ãªç™ºå±•',
                    'AIä¼æ¥­ã®åˆ©ç›Šç¢ºä¿',
                    'å›½éš›ç«¶äº‰åŠ›ã®å‘ä¸Šã®ã¿'
                ],
                correct: 1,
                explanation: 'AIæ³•ã¯ã€AIæŠ€è¡“ã®æ¨é€²ã«ã‚ˆã‚Šã€Œå›½æ°‘ç”Ÿæ´»ã®å‘ä¸ŠåŠã³å›½æ°‘çµŒæ¸ˆã®å¥å…¨ãªç™ºå±•ã«å¯„ä¸ã™ã‚‹ã€ã“ã¨ã‚’æœ€çµ‚ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚',
                chapter: 1
            },
            {
                article: 'ç¬¬2æ¡ï¼ˆå®šç¾©ï¼‰',
                technique: 'ğŸ” AIæŠ€è¡“ã®å®šç¾©',
                question: 'AIæ³•ã«ãŠã‘ã‚‹ã€Œäººå·¥çŸ¥èƒ½é–¢é€£æŠ€è¡“ã€ã®å®šç¾©ã«å«ã¾ã‚Œã‚‹ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'äººé–“ã®èªçŸ¥ã€æ¨è«–åŠã³åˆ¤æ–­ã«ä¿‚ã‚‹çŸ¥çš„ãªèƒ½åŠ›ã‚’ä»£æ›¿ã™ã‚‹æ©Ÿèƒ½',
                    'ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæŠ€è¡“å…¨èˆ¬',
                    'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ',
                    'ä¸€èˆ¬çš„ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™º'
                ],
                correct: 0,
                explanation: 'AIé–¢é€£æŠ€è¡“ã¯ã€Œäººå·¥çš„ãªæ–¹æ³•ã«ã‚ˆã‚Šäººé–“ã®èªçŸ¥ã€æ¨è«–åŠã³åˆ¤æ–­ã«ä¿‚ã‚‹çŸ¥çš„ãªèƒ½åŠ›ã‚’ä»£æ›¿ã™ã‚‹æ©Ÿèƒ½ã€ã¨å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 1
            },
            {
                article: 'ç¬¬3æ¡ï¼ˆåŸºæœ¬ç†å¿µï¼‰',
                technique: 'âš¡ åŸºæœ¬ç†å¿µã®åŠ›',
                question: 'AIæŠ€è¡“ã®ç ”ç©¶é–‹ç™ºã«ãŠã„ã¦é‡è¦è¦–ã•ã‚Œã¦ã„ã‚‹è¦³ç‚¹ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'ã‚³ã‚¹ãƒˆå‰Šæ¸›ã®ã¿',
                    'å®‰å…¨ä¿éšœã®è¦³ç‚¹ã‚‚å«ã‚€é‡è¦ãªæŠ€è¡“',
                    'å¨¯æ¥½ç›®çš„ã®æ´»ç”¨',
                    'çŸ­æœŸçš„ãªåˆ©ç›Šè¿½æ±‚'
                ],
                correct: 1,
                explanation: 'AIæŠ€è¡“ã¯ã€Œå®‰å…¨ä¿éšœã®è¦³ç‚¹ã‹ã‚‰ã‚‚é‡è¦ãªæŠ€è¡“ã€ã¨ã—ã¦ä½ç½®ã¥ã‘ã‚‰ã‚Œã€å›½éš›ç«¶äº‰åŠ›å‘ä¸ŠãŒé‡è¦–ã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 1
            },
            {
                article: 'ç¬¬3æ¡ç¬¬4é …ï¼ˆé©æ­£å®Ÿæ–½ï¼‰',
                technique: 'ğŸ›¡ï¸ é©æ­£æ€§ã®ç›¾',
                question: 'AIæŠ€è¡“ã®ä¸é©åˆ‡ãªåˆ©ç”¨ã§æ‡¸å¿µã•ã‚Œã‚‹äº‹æ…‹ã¨ã—ã¦æŒ™ã’ã‚‰ã‚Œã¦ã„ãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'çŠ¯ç½ªã¸ã®åˆ©ç”¨',
                    'å€‹äººæƒ…å ±ã®æ¼ãˆã„',
                    'è‘—ä½œæ¨©ã®ä¾µå®³',
                    'é€šä¿¡é€Ÿåº¦ã®ä½ä¸‹'
                ],
                correct: 3,
                explanation: 'AIæŠ€è¡“ã®ä¸é©åˆ‡åˆ©ç”¨ã§ã¯ã€ŒçŠ¯ç½ªã¸ã®åˆ©ç”¨ã€å€‹äººæƒ…å ±ã®æ¼ãˆã„ã€è‘—ä½œæ¨©ã®ä¾µå®³ã€ãªã©ãŒæ‡¸å¿µäº‹é …ã¨ã—ã¦æ˜è¨˜ã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 1
            },
            {
                article: 'ç¬¬4æ¡ï¼ˆå›½ã®è²¬å‹™ï¼‰',
                technique: 'ğŸ›ï¸ å›½å®¶æˆ¦ç•¥æ”»æ’ƒ',
                question: 'å›½ã®è²¬å‹™ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'æ°‘é–“ä¼æ¥­ã¸ã®ä¸¸æŠ•ã’',
                    'æ–½ç­–ã®ç·åˆçš„ã‹ã¤è¨ˆç”»çš„ãªç­–å®šãƒ»å®Ÿæ–½',
                    'è¦åˆ¶ã®ã¿ã«å°‚å¿µ',
                    'æµ·å¤–æŠ€è¡“ã¸ã®ä¾å­˜'
                ],
                correct: 1,
                explanation: 'å›½ã¯åŸºæœ¬ç†å¿µã«åŸºã¥ãã€ŒAIæŠ€è¡“ã®ç ”ç©¶é–‹ç™ºåŠã³æ´»ç”¨æ¨é€²ã«é–¢ã™ã‚‹æ–½ç­–ã‚’ç·åˆçš„ã‹ã¤è¨ˆç”»çš„ã«ç­–å®šãƒ»å®Ÿæ–½ã™ã‚‹è²¬å‹™ã€ãŒã‚ã‚Šã¾ã™ã€‚',
                chapter: 1
            },
            {
                article: 'ç¬¬6æ¡ï¼ˆç ”ç©¶é–‹ç™ºæ©Ÿé–¢ï¼‰',
                technique: 'ğŸ”¬ ç ”ç©¶é–‹ç™ºã®æ¥µæ„',
                question: 'ç ”ç©¶é–‹ç™ºæ©Ÿé–¢ã«æ±‚ã‚ã‚‰ã‚Œã‚‹å–ã‚Šçµ„ã¿ã¨ã—ã¦é©åˆ‡ã§ãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'å­¦éš›çš„åˆã¯ç·åˆçš„ãªç ”ç©¶é–‹ç™º',
                    'å°‚é–€çš„ã‹ã¤å¹…åºƒã„çŸ¥è­˜ã‚’æœ‰ã™ã‚‹äººæã®è‚²æˆ',
                    'å˜ä¸€åˆ†é‡ã§ã®ç ”ç©¶ã«å°‚å¿µ',
                    'ç ”ç©¶æˆæœã®æ™®åŠ'
                ],
                correct: 2,
                explanation: 'ç ”ç©¶é–‹ç™ºæ©Ÿé–¢ã¯ã€Œäººæ–‡ç§‘å­¦åŠã³è‡ªç„¶ç§‘å­¦ã«é–¢ã™ã‚‹å¤šæ§˜ãªåˆ†é‡ã®çŸ¥è¦‹ã‚’ç·åˆçš„ã«æ´»ç”¨ã€ã—ã€å­¦éš›çš„ç ”ç©¶ã«åŠªã‚ã‚‹ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 1
            },
            {
                article: 'ç¬¬7æ¡ï¼ˆæ´»ç”¨äº‹æ¥­è€…ï¼‰',
                technique: 'ğŸ’¼ äº‹æ¥­æ´»ç”¨ã®è¡“',
                question: 'æ´»ç”¨äº‹æ¥­è€…ã®è²¬å‹™ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'æ”¿åºœæ–½ç­–ã¸ã®å”åŠ›ç¾©å‹™',
                    'åˆ©ç›Šè¿½æ±‚ã®ã¿ã«å°‚å¿µ',
                    'æŠ€è¡“ã®ç‹¬å ',
                    'è¦åˆ¶ã®å›é¿'
                ],
                correct: 0,
                explanation: 'æ´»ç”¨äº‹æ¥­è€…ã¯ã€Œå›½ãƒ»åœ°æ–¹å…¬å…±å›£ä½“ãŒå®Ÿæ–½ã™ã‚‹æ–½ç­–ã«å”åŠ›ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 1
            },
            {
                article: 'ç¬¬8æ¡ï¼ˆå›½æ°‘ã®è²¬å‹™ï¼‰',
                technique: 'ğŸ¤ å›½æ°‘å”åŠ›ã®çµ†',
                question: 'å›½æ°‘ã®è²¬å‹™ã¨ã—ã¦æ±‚ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'ç„¡é–¢å¿ƒã‚’è²«ã',
                    'AIæŠ€è¡“ã¸ã®ç†è§£ã¨é–¢å¿ƒã‚’æ·±ã‚ã‚‹',
                    'æŠ€è¡“é–‹ç™ºã¸ã®ç›´æ¥å‚åŠ ',
                    'æ”¿åºœæ‰¹åˆ¤ã«å°‚å¿µ'
                ],
                correct: 1,
                explanation: 'å›½æ°‘ã¯ã€ŒAIæŠ€è¡“ã«å¯¾ã™ã‚‹ç†è§£ã¨é–¢å¿ƒã‚’æ·±ã‚ã‚‹ã€ã¨ã¨ã‚‚ã«ã€å›½ãƒ»åœ°æ–¹ã®æ–½ç­–ã«å”åŠ›ã™ã‚‹ã‚ˆã†åŠªã‚ã‚‹ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 1
            },
            {
                article: 'ç¬¬9æ¡ï¼ˆé€£æºå¼·åŒ–ï¼‰',
                technique: 'ğŸŒ é€£æºã®ç¶²',
                question: 'é€£æºå¼·åŒ–ãŒå¿…è¦ãªä¸»ä½“ã«å«ã¾ã‚Œãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'å›½',
                    'åœ°æ–¹å…¬å…±å›£ä½“',
                    'ç ”ç©¶é–‹ç™ºæ©Ÿé–¢',
                    'æµ·å¤–ç«¶åˆä¼æ¥­'
                ],
                correct: 3,
                explanation: 'é€£æºå¼·åŒ–ãŒå¿…è¦ãªã®ã¯ã€Œå›½ã€åœ°æ–¹å…¬å…±å›£ä½“ã€ç ”ç©¶é–‹ç™ºæ©Ÿé–¢åŠã³æ´»ç”¨äº‹æ¥­è€…ã€ã§ã™ã€‚',
                chapter: 1
            },
            {
                article: 'ç¬¬10æ¡ï¼ˆæ³•åˆ¶ä¸Šã®æªç½®ï¼‰',
                technique: 'ğŸ“œ æ³•åˆ¶æ•´å‚™ã®åŠ›',
                question: 'å›½ãŒè¬›ãšã¹ãæªç½®ã¨ã—ã¦æŒ™ã’ã‚‰ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'æ³•åˆ¶ä¸Šã®æªç½®ã®ã¿',
                    'è²¡æ”¿ä¸Šã®æªç½®ã®ã¿',
                    'æ³•åˆ¶ä¸Šåˆã¯è²¡æ”¿ä¸Šã®æªç½®ãã®ä»–ã®æªç½®',
                    'æ°‘é–“è³‡é‡‘ã®ã¿ã«ä¾å­˜'
                ],
                correct: 2,
                explanation: 'å›½ã¯ã€Œæ³•åˆ¶ä¸Šåˆã¯è²¡æ”¿ä¸Šã®æªç½®ãã®ä»–ã®æªç½®ã€ã‚’è¬›ãšã‚‹ã‚‚ã®ã¨ã•ã‚Œã€åŒ…æ‹¬çš„ãªæ”¯æ´ãŒæƒ³å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 1
            },
            // ç¬¬äºŒç«  åŸºæœ¬çš„æ–½ç­–ï¼ˆç¬¬11-17æ¡ï¼‰
            {
                article: 'ç¬¬11æ¡ï¼ˆç ”ç©¶é–‹ç™ºã®æ¨é€²ç­‰ï¼‰',
                technique: 'ğŸš€ ç ”ç©¶é–‹ç™ºæ¨é€²',
                question: 'ç ”ç©¶é–‹ç™ºæ¨é€²ã§é‡è¦ãªè¦ç´ ã¨ã—ã¦å«ã¾ã‚Œãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'åŸºç¤ç ”ç©¶ã‹ã‚‰å®Ÿç”¨åŒ–ã¾ã§ä¸€è²«ã—ãŸæ¨é€²',
                    'æˆæœç§»è»¢ä½“åˆ¶ã®æ•´å‚™',
                    'ç«¶åˆä»–ç¤¾ã®ç ”ç©¶å¦¨å®³',
                    'ç ”ç©¶æˆæœæƒ…å ±ã®æä¾›'
                ],
                correct: 2,
                explanation: 'ç¬¬11æ¡ã§ã¯ã€ŒåŸºç¤ç ”ç©¶ã‹ã‚‰å®Ÿç”¨åŒ–ã¾ã§ä¸€è²«ã—ãŸç ”ç©¶é–‹ç™ºæ¨é€²ã€æˆæœç§»è»¢ä½“åˆ¶æ•´å‚™ã€æƒ…å ±æä¾›ã€ãŒè¦å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 2
            },
            {
                article: 'ç¬¬12æ¡ï¼ˆæ–½è¨­åŠã³è¨­å‚™ç­‰ï¼‰',
                technique: 'ğŸ—ï¸ ã‚¤ãƒ³ãƒ•ãƒ©æ•´å‚™',
                question: 'AIæŠ€è¡“ã®ç ”ç©¶é–‹ç™ºã§å…±ç”¨ãŒä¿ƒé€²ã•ã‚Œã‚‹æ–½è¨­ã¨ã—ã¦é©åˆ‡ã§ãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'å¤§è¦æ¨¡æƒ…å ±å‡¦ç†æ–½è¨­',
                    'æƒ…å ±é€šä¿¡è¨­å‚™',
                    'å€‹äººã®ç§çš„ç ”ç©¶å®¤',
                    'ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãªã©ã®çŸ¥çš„åŸºç›¤'
                ],
                correct: 2,
                explanation: 'ç¬¬12æ¡ã§ã¯ã€Œå¤§è¦æ¨¡æƒ…å ±å‡¦ç†ã€æƒ…å ±é€šä¿¡ã€é›»ç£çš„è¨˜éŒ²ä¿ç®¡æ–½è¨­ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç­‰ã®çŸ¥çš„åŸºç›¤ã€ã®å…±ç”¨ä¿ƒé€²ãŒè¦å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 2
            },
            {
                article: 'ç¬¬13æ¡ï¼ˆé©æ­£æ€§ã®ç¢ºä¿ï¼‰',
                technique: 'âš–ï¸ å›½éš›è¦ç¯„éµå®ˆ',
                question: 'AIæŠ€è¡“ã®é©æ­£æ€§ç¢ºä¿ã§é‡è¦ã¨ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'å›½å†…åŸºæº–ã®ã¿ã«ä¾æ‹ ',
                    'å›½éš›çš„ãªè¦ç¯„ã®è¶£æ—¨ã«å³ã—ãŸæŒ‡é‡æ•´å‚™',
                    'ä¼æ¥­ã®è‡ªä¸»æ€§ã®ã¿ã«å§”ã­ã‚‹',
                    'è¦åˆ¶ã®å®Œå…¨æ’¤å»ƒ'
                ],
                correct: 1,
                explanation: 'ç¬¬13æ¡ã§ã¯ã€Œå›½éš›çš„ãªè¦ç¯„ã®è¶£æ—¨ã«å³ã—ãŸæŒ‡é‡ã®æ•´å‚™ã€ã«ã‚ˆã‚Šé©æ­£æ€§ç¢ºä¿ã‚’å›³ã‚‹ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 2
            },
            {
                article: 'ç¬¬14æ¡ï¼ˆäººæã®ç¢ºä¿ç­‰ï¼‰',
                technique: 'ğŸ‘¨â€ğŸ“ äººæè‚²æˆãƒã‚¹ã‚¿ãƒ¼',
                question: 'AIåˆ†é‡ã®äººæè‚²æˆã§æ±‚ã‚ã‚‰ã‚Œã‚‹ç¯„å›²ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'åŸºç¤ç ”ç©¶ã®ã¿',
                    'å®Ÿç”¨åŒ–ã®ã¿',
                    'åŸºç¤ç ”ç©¶ã‹ã‚‰å›½æ°‘ç”Ÿæ´»ãƒ»çµŒæ¸ˆæ´»å‹•ã§ã®æ´»ç”¨ã¾ã§',
                    'å¤§å­¦ç ”ç©¶ã®ã¿'
                ],
                correct: 2,
                explanation: 'ç¬¬14æ¡ã§ã¯ã€ŒåŸºç¤ç ”ç©¶ã‹ã‚‰å›½æ°‘ç”Ÿæ´»åŠã³çµŒæ¸ˆæ´»å‹•ã«ãŠã‘ã‚‹æ´»ç”¨ã¾ã§å„æ®µéšã§å¿…è¦ãªå¤šæ§˜åˆ†é‡äººæã€ã®è‚²æˆãŒè¦å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 2
            },
            {
                article: 'ç¬¬15æ¡ï¼ˆæ•™è‚²ã®æŒ¯èˆˆç­‰ï¼‰',
                technique: 'ğŸ“š æ•™è‚²æŒ¯èˆˆ',
                question: 'AIæŠ€è¡“ã«é–¢ã™ã‚‹æ•™è‚²æŒ¯èˆˆã®ç›®çš„ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'ç ”ç©¶è€…ã®ã¿ã®çŸ¥è­˜å‘ä¸Š',
                    'å›½æ°‘ãŒåºƒãAIæŠ€è¡“ã¸ã®ç†è§£ã¨é–¢å¿ƒã‚’æ·±ã‚ã‚‹',
                    'ä¼æ¥­ã®åˆ©ç›Šè¿½æ±‚',
                    'æ”¿åºœæ”¿ç­–ã¸ã®ç„¡æ‰¹åˆ¤ãªåŒèª¿'
                ],
                correct: 1,
                explanation: 'ç¬¬15æ¡ã§ã¯ã€Œå›½æ°‘ãŒåºƒãAIæŠ€è¡“ã«å¯¾ã™ã‚‹ç†è§£ã¨é–¢å¿ƒã‚’æ·±ã‚ã‚‹ã€ãŸã‚ã®æ•™è‚²ãƒ»å­¦ç¿’æŒ¯èˆˆã€åºƒå ±æ´»å‹•å……å®ŸãŒè¦å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 2
            },
            {
                article: 'ç¬¬16æ¡ï¼ˆèª¿æŸ»ç ”ç©¶ç­‰ï¼‰',
                technique: 'ğŸ” èª¿æŸ»ç ”ç©¶',
                question: 'å›½ãŒè¡Œã†èª¿æŸ»ç ”ç©¶ã«å«ã¾ã‚Œãªã„ã‚‚ã®ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'å›½å†…å¤–ã®AIæŠ€è¡“å‹•å‘æƒ…å ±åé›†',
                    'ä¸é©åˆ‡åˆ©ç”¨ã«ã‚ˆã‚‹æ¨©åˆ©ä¾µå®³äº‹æ¡ˆåˆ†æ',
                    'ç«¶åˆå›½ã®æŠ€è¡“æ©Ÿå¯†å…¥æ‰‹',
                    'å¯¾ç­–æ¤œè¨ã¨æŒ‡å°ãƒ»åŠ©è¨€'
                ],
                correct: 2,
                explanation: 'ç¬¬16æ¡ã§ã¯ã€Œå›½å†…å¤–å‹•å‘æƒ…å ±åé›†ã€æ¨©åˆ©åˆ©ç›Šä¾µå®³äº‹æ¡ˆåˆ†æã€å¯¾ç­–æ¤œè¨ã€æŒ‡å°ãƒ»åŠ©è¨€ãƒ»æƒ…å ±æä¾›ã€ãŒè¦å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 2
            },
            {
                article: 'ç¬¬17æ¡ï¼ˆå›½éš›å”åŠ›ï¼‰',
                technique: 'ğŸŒ å›½éš›å”åŠ›',
                question: 'AIåˆ†é‡ã§ã®å›½éš›å”åŠ›ã¨ã—ã¦é‡è¦ãªå–ã‚Šçµ„ã¿ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ',
                options: [
                    'è‡ªå›½æŠ€è¡“ã®ç‹¬å ',
                    'å›½éš›å”åŠ›æ¨é€²ã¨å›½éš›è¦ç¯„ç­–å®šã¸ã®ç©æ¥µå‚ç”»',
                    'ä»–å›½ã¨ã®ç«¶äº‰æ¿€åŒ–',
                    'æŠ€è¡“è¼¸å‡ºã®å®Œå…¨åœæ­¢'
                ],
                correct: 1,
                explanation: 'ç¬¬17æ¡ã§ã¯ã€ŒAIæŠ€è¡“ã®ç ”ç©¶é–‹ç™ºãƒ»æ´»ç”¨ã«é–¢ã™ã‚‹å›½éš›å”åŠ›æ¨é€²ã€ã¨ã€Œå›½éš›çš„ãªè¦ç¯„ã®ç­–å®šã«ç©æ¥µçš„ã«å‚ç”»ã€ãŒè¦å®šã•ã‚Œã¦ã„ã¾ã™ã€‚',
                chapter: 2
            }
        ];

        // ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é¸æŠ
        document.querySelectorAll('.character-card').forEach(card => {
            card.addEventListener('click', () => {
                document.querySelectorAll('.character-card').forEach(c => c.classList.remove('selected'));
                card.classList.add('selected');
                gameState.playerCharacter = card.dataset.character;
                document.getElementById('startButton').disabled = false;
            });
        });

        // ãƒãƒˆãƒ«é–‹å§‹
        function startBattle() {
            document.querySelector('.character-select-screen').style.display = 'none';
            document.querySelector('.battle-screen').style.display = 'block';
            
            const character = characters[gameState.playerCharacter];
            document.getElementById('playerIcon').textContent = character.icon;
            document.getElementById('playerName').textContent = character.name;
            
            addToBattleLog('ğŸ® ãƒãƒˆãƒ«é–‹å§‹ï¼AIæ³•ã®çŸ¥è­˜ã§å‹åˆ©ã‚’ç›®æŒ‡ãã†ï¼');
            addToBattleLog(`ğŸ“š å…¨4ç« ï¼ˆç·å‰‡ãƒ»åŸºæœ¬çš„æ–½ç­–ãƒ»åŸºæœ¬è¨ˆç”»ãƒ»æˆ¦ç•¥æœ¬éƒ¨ï¼‰ã®æŠ€ãŒä½¿ç”¨å¯èƒ½ã§ã™`);
            addToBattleLog(`âš”ï¸ å„æŠ€ã¯1ã‚¿ãƒ¼ãƒ³ã«1å›ã®ã¿ä½¿ç”¨å¯èƒ½ï¼é«˜æ¬¡ã®ç« ã»ã©å¼·åŠ›ï¼`);
            nextTurn();
        }

        // æ¬¡ã®ã‚¿ãƒ¼ãƒ³
        function nextTurn() {
            gameState.turnNumber++;
            gameState.currentTurn = 'player';
            
            // ä½¿ç”¨å¯èƒ½ãªæŠ€ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆæœªä½¿ç”¨ã®ã‚‚ã®ã®ã¿ï¼‰
            const availableQuizzes = quizData.filter(quiz => 
                gameState.availableChapters.includes(quiz.chapter) &&
                !gameState.playerUsedTechniques.includes(quiz.article)
            );
            
            // ä½¿ãˆã‚‹æŠ€ãŒãªã„å ´åˆã¯å…¨æŠ€ã‚’ãƒªã‚»ãƒƒãƒˆ
            if (availableQuizzes.length === 0) {
                gameState.playerUsedTechniques = [];
                gameState.enemyUsedTechniques = [];
                addToBattleLog('ğŸ’« å…¨ã¦ã®æŠ€ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã—ãŸï¼');
                return nextTurn();
            }
            
            // ãƒ©ãƒ³ãƒ€ãƒ ãªæŠ€ã‚’é¸æŠ
            gameState.currentQuiz = availableQuizzes[Math.floor(Math.random() * availableQuizzes.length)];
            displayQuiz();
            
            document.getElementById('nextButton').style.display = 'none';
            document.getElementById('submitButton').disabled = true;
            document.getElementById('explanation').style.display = 'none';
        }

        // ã‚¯ã‚¤ã‚ºè¡¨ç¤º
        function displayQuiz() {
            const quiz = gameState.currentQuiz;
            document.getElementById('techniqueName').textContent = quiz.technique;
            
            // ç« æƒ…å ±ã‚’è¡¨ç¤º
            const chapterNames = {
                1: 'ç¬¬ä¸€ç«  ç·å‰‡',
                2: 'ç¬¬äºŒç«  åŸºæœ¬çš„æ–½ç­–', 
                3: 'ç¬¬ä¸‰ç«  åŸºæœ¬è¨ˆç”»',
                4: 'ç¬¬å››ç«  æˆ¦ç•¥æœ¬éƒ¨'
            };
            const chapterName = chapterNames[quiz.chapter] || 'ä¸æ˜ãªç« ';
            const chapterInfoElement = document.getElementById('chapterInfo');
            if (chapterInfoElement) {
                chapterInfoElement.textContent = `${chapterName} | ${quiz.article}`;
            }
            
            document.getElementById('quizQuestion').textContent = `${quiz.article}: ${quiz.question}`;
            
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            quiz.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option';
                optionElement.textContent = option;
                optionElement.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionElement);
            });
            
            gameState.selectedAnswer = null;
        }

        // é¸æŠè‚¢é¸æŠ
        function selectOption(index) {
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelectorAll('.quiz-option')[index].classList.add('selected');
            gameState.selectedAnswer = index;
            document.getElementById('submitButton').disabled = false;
        }

        // å›ç­”é€ä¿¡
        function submitAnswer() {
            const quiz = gameState.currentQuiz;
            const isCorrect = gameState.selectedAnswer === quiz.correct;
            
            // ä½¿ç”¨æ¸ˆã¿æŠ€ã«è¿½åŠ 
            gameState.playerUsedTechniques.push(quiz.article);
            
            gameState.totalAnswers++;
            if (isCorrect) gameState.correctAnswers++;
            
            // çµæœè¡¨ç¤º
            document.querySelectorAll('.quiz-option').forEach((option, index) => {
                if (index === quiz.correct) {
                    option.classList.add('correct');
                } else if (index === gameState.selectedAnswer && !isCorrect) {
                    option.classList.add('incorrect');
                }
            });
            
            // ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ï¼ˆç« ã«ã‚ˆã£ã¦ãƒ™ãƒ¼ã‚¹ãƒ€ãƒ¡ãƒ¼ã‚¸èª¿æ•´ï¼‰
            let baseDamage;
            switch(quiz.chapter) {
                case 1: baseDamage = 20; break; // ç¬¬ä¸€ç« ï¼šåŸºæœ¬
                case 2: baseDamage = 25; break; // ç¬¬äºŒç« ï¼šå¼·åŠ›
                case 3: baseDamage = 30; break; // ç¬¬ä¸‰ç« ï¼šæˆ¦ç•¥çš„
                case 4: baseDamage = 35; break; // ç¬¬å››ç« ï¼šæœ€å¼·
                default: baseDamage = 20;
            }
            
            let damage;
            if (isCorrect) {
                damage = Math.floor(Math.random() * 20) + baseDamage; // åŸºæœ¬+0-19ãƒ€ãƒ¡ãƒ¼ã‚¸
                addToBattleLog(`âœ… æ­£è§£ï¼${quiz.technique}ã§${damage}ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼`);
            } else {
                damage = Math.floor(Math.random() * 10) + 5; // 5-14ãƒ€ãƒ¡ãƒ¼ã‚¸
                addToBattleLog(`âŒ ä¸æ­£è§£... ${damage}ãƒ€ãƒ¡ãƒ¼ã‚¸`);
            }
            
            gameState.totalDamage += damage;
            gameState.enemyHP = Math.max(0, gameState.enemyHP - damage);
            updateHP();
            showDamageAnimation('enemy', damage, isCorrect);
            
            // è§£èª¬è¡¨ç¤º
            document.getElementById('explanation').textContent = quiz.explanation;
            document.getElementById('explanation').style.display = 'block';
            
            document.getElementById('submitButton').disabled = true;
            
            // å‹åˆ©åˆ¤å®š
            if (gameState.enemyHP <= 0) {
                endGame(true);
                return;
            }
            
            // æ•µã®ã‚¿ãƒ¼ãƒ³
            setTimeout(() => {
                enemyTurn();
            }, 2000);
        }

        // æ•µã®ã‚¿ãƒ¼ãƒ³
        function enemyTurn() {
            // æ•µã‚‚ä½¿ç”¨å¯èƒ½ãªæŠ€ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
            const availableEnemyQuizzes = quizData.filter(quiz => 
                gameState.availableChapters.includes(quiz.chapter) &&
                !gameState.enemyUsedTechniques.includes(quiz.article)
            );
            
            // æ•µã®æŠ€ãŒãªã„å ´åˆã¯ãƒªã‚»ãƒƒãƒˆ
            if (availableEnemyQuizzes.length === 0) {
                gameState.enemyUsedTechniques = [];
            }
            
            // æ•µã®æŠ€é¸æŠ
            const enemyQuiz = availableEnemyQuizzes.length > 0 ? 
                availableEnemyQuizzes[Math.floor(Math.random() * availableEnemyQuizzes.length)] :
                quizData[Math.floor(Math.random() * quizData.length)];
                
            gameState.enemyUsedTechniques.push(enemyQuiz.article);
            
            const enemyDamage = Math.floor(Math.random() * 15) + 10; // 10-24ãƒ€ãƒ¡ãƒ¼ã‚¸
            gameState.playerHP = Math.max(0, gameState.playerHP - enemyDamage);
            updateHP();
            
            addToBattleLog(`ğŸ¤– AIæ³•ãƒã‚¹ã‚¿ãƒ¼ã®${enemyQuiz.technique}ï¼${enemyDamage}ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’å—ã‘ãŸï¼`);
            showDamageAnimation('player', enemyDamage, false);
            
            if (gameState.playerHP <= 0) {
                endGame(false);
                return;
            }
            
            document.getElementById('nextButton').style.display = 'block';
        }

        // HPæ›´æ–°
        function updateHP() {
            const playerHPPercent = (gameState.playerHP / 100) * 100;
            const enemyHPPercent = (gameState.enemyHP / 100) * 100;
            
            document.getElementById('playerHP').style.width = playerHPPercent + '%';
            document.getElementById('enemyHP').style.width = enemyHPPercent + '%';
            
            document.getElementById('playerHPText').textContent = `HP: ${gameState.playerHP}/100`;
            document.getElementById('enemyHPText').textContent = `HP: ${gameState.enemyHP}/100`;
        }

        // ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function showDamageAnimation(target, damage, isCorrect) {
            const targetElement = document.getElementById(target);
            const damageElement = document.createElement('div');
            damageElement.className = 'damage-animation';
            damageElement.textContent = `-${damage}`;
            damageElement.style.color = isCorrect ? '#2ed573' : '#ff4757';
            damageElement.style.left = '50%';
            damageElement.style.top = '30%';
            
            targetElement.style.position = 'relative';
            targetElement.appendChild(damageElement);
            
            setTimeout(() => {
                damageElement.remove();
            }, 1000);
        }

        // ãƒãƒˆãƒ«ãƒ­ã‚°è¿½åŠ 
        function addToBattleLog(message) {
            const log = document.getElementById('battleLog');
            const timestamp = new Date().toLocaleTimeString();
            log.innerHTML += `[${timestamp}] ${message}\n`;
            log.scrollTop = log.scrollHeight;
        }

        // ã‚²ãƒ¼ãƒ çµ‚äº†
        function endGame(playerWon) {
            const accuracy = Math.round((gameState.correctAnswers / gameState.totalAnswers) * 100);
            
            // ä½¿ç”¨ã—ãŸç« ã‚’é›†è¨ˆ
            const usedChapters = [...new Set(quizData
                .filter(quiz => gameState.playerUsedTechniques.includes(quiz.article))
                .map(quiz => quiz.chapter)
            )].sort();
            
            let learningLevel;
            if (accuracy >= 90) learningLevel = 'AIæ³•ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ';
            else if (accuracy >= 70) learningLevel = 'ä¸Šç´šè€…';
            else if (accuracy >= 50) learningLevel = 'ä¸­ç´šè€…';
            else learningLevel = 'åˆå¿ƒè€…';
            
            // ç« åˆ¶è¦‡ãƒœãƒ¼ãƒŠã‚¹
            if (usedChapters.length === 4 && accuracy >= 80) {
                learningLevel = 'AIæ³•ã‚°ãƒ©ãƒ³ãƒ‰ãƒã‚¹ã‚¿ãƒ¼';
            }
            
            document.querySelector('.battle-screen').style.display = 'none';
            document.getElementById('gameOver').style.display = 'block';
            
            document.getElementById('gameResult').textContent = playerWon ? 'ğŸ‰ å‹åˆ©ï¼' : 'ğŸ˜” æ•—åŒ—...';
            document.getElementById('accuracyRate').textContent = `${accuracy}%`;
            document.getElementById('totalDamage').textContent = gameState.totalDamage;
            document.getElementById('turnCount').textContent = gameState.turnNumber;
            document.getElementById('chaptersUsed').textContent = usedChapters.length > 0 ? 
                usedChapters.map(c => `ç¬¬${c}ç« `).join('ãƒ»') : 'ãªã—';
            document.getElementById('learningLevel').textContent = learningLevel;
            
            if (playerWon) {
                addToBattleLog('ğŸŠ å‹åˆ©ï¼AIæ³•ãƒã‚¹ã‚¿ãƒ¼ã«å‹åˆ©ã—ã¾ã—ãŸï¼');
            } else {
                addToBattleLog('ğŸ’€ æ•—åŒ—... ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼');
            }
        }

        // ã‚²ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
        function resetGame() {
            gameState = {
                playerCharacter: null,
                playerHP: 100,
                enemyHP: 100,
                currentTurn: 'player',
                selectedAnswer: null,
                currentQuiz: null,
                turnNumber: 0,
                correctAnswers: 0,
                totalAnswers: 0,
                totalDamage: 0,
                availableChapters: [1, 2, 3, 4],
                playerUsedTechniques: [],
                enemyUsedTechniques: []
            };
            
            document.querySelector('.character-select-screen').style.display = 'block';
            document.querySelector('.battle-screen').style.display = 'none';
            document.getElementById('gameOver').style.display = 'none';
            
            document.querySelectorAll('.character-card').forEach(c => c.classList.remove('selected'));
            document.getElementById('startButton').disabled = true;
            document.getElementById('battleLog').innerHTML = '';
            
            updateHP();
        }
    </script>
</body>
</html>